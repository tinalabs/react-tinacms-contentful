!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("tinacms-contentful"),require("react"),require("styled-components"),require("@tinacms/icons"),require("react-dismissible"),require("@tinacms/styles"),require("@tinacms/react-modals"),require("@tinacms/forms"),require("@tinacms/react-core"),require("@tinacms/react-forms"),require("tinacms"),require("react-beautiful-dnd"),require("@tinacms/form-builder")):"function"==typeof define&&define.amd?define(["exports","tinacms-contentful","react","styled-components","@tinacms/icons","react-dismissible","@tinacms/styles","@tinacms/react-modals","@tinacms/forms","@tinacms/react-core","@tinacms/react-forms","tinacms","react-beautiful-dnd","@tinacms/form-builder"],e):e((n=n||self)["react-tinacms-contentful"]={},n.tinacmsContentful,n.React,n.styled,n.icons,n.reactDismissible,n.styles,n.reactModals,n.forms,n.reactCore,n.reactForms,n.tinacms,n.reactBeautifulDnd,n.formBuilder)}(this,function(e,v,h,t,d,m,s,l,c,u,f,y,p,g){"use strict";var b="default"in h?h.default:h,n="default"in t?t.default:t,E=function(){return(E=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}).apply(this,arguments)};function r(n,e){var t={};for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function w(o,a,l,s){return new(l=l||Promise)(function(n,e){function t(n){try{i(s.next(n))}catch(n){e(n)}}function r(n){try{i(s.throw(n))}catch(n){e(n)}}function i(e){e.done?n(e.value):new l(function(n){n(e.value)}).then(t,r)}i((s=s.apply(o,a||[])).next())})}function x(t,r){var i,o,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},n={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function e(e){return function(n){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,o=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(t,l)}catch(n){e=[6,n],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,n])}}}function i(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function o(n,e){return e=e&&n.sys.id===e.sys.id?"selected":"",b.createElement("option",{value:JSON.stringify(n),selected:!0},n.fields.title||n.fields.name," ")}function k(n){var e=n.plugin,t=n.close,r=u.useCMS(),i=h.useMemo(function(){return new c.Form({label:"create-form",id:"create-form-id",actions:[],fields:e.fields,onSubmit:function(n){e.onSubmit(n,r).then(function(){t()})}})},[t,r,e]);return h.createElement(l.Modal,null,h.createElement(l.ModalPopup,null,h.createElement(l.ModalHeader,{close:t},e.name),h.createElement(l.ModalBody,null,h.createElement(f.FormView,{activeForm:i}))))}function C(n){var e;if("Link"!==((null===(e=n.sys)||void 0===e?void 0:e.contentType.sys.type)||""))return n;var t=n.sys;return t.space,t.contentType,t.environment,{sys:{id:r(t,["space","contentType","environment"]).id,type:"Link",linkType:"Entry"}}}function S(i,o){var a={};return Object.keys(i).forEach(function(n){var e,t,r=i[n];Array.isArray(r)?a[n]=((e={})[o]=r.map(C),e):a[n]=((t={})[o]=C(r),t)}),a}function a(n){function e(){return w(void 0,void 0,void 0,function(){var e;return x(this,function(n){return e=a.values["content-model"]||i[0],[2,o.api.contentful.fetchEntries(e)]})})}var t=n.onSubmit,r=n.close,i=n.models,o=u.useCMS(),a=h.useMemo(function(){return new c.Form({label:"link-form",id:"link-form-id",actions:[],fields:[{name:"content-model",component:"select",label:"Block type",description:"What type of block would you like to add?",options:i},{name:"selected",label:"Block",component:"contentful-linked-field",parse:function(n){return JSON.parse(n)},getOptions:e}],onSubmit:function(n){var e={sys:n.selected.sys,fields:S(n.selected.fields,"en-US")};t(e,o),r()}})},[r,o,t]);return h.createElement(l.Modal,null,h.createElement(g.FormBuilder,{form:a},function(n){var e=n.handleSubmit;return h.createElement(l.ModalPopup,null,h.createElement(l.ModalHeader,{close:r},"Link block"),h.createElement(l.ModalBody,{onKeyPress:function(n){return 13===n.charCode?e():null}},h.createElement(g.FieldsBuilder,{form:a,fields:a.fields})),h.createElement(l.ModalActions,null,h.createElement(s.Button,{onClick:r},"Cancel"),h.createElement(s.Button,{onClick:e,primary:!0},"Add")))}))}function M(n){var e=n.field,t=n.onAddBlock,r=h.useState(!1),i=r[0],o=r[1];return h.createElement(h.Fragment,null,h.createElement(P,{onClick:function(){return o(!0)},open:i,primary:!0,small:!0},h.createElement(d.AddIcon,null),"Link existing block"),h.createElement(m.Dismissible,{escape:!0,onDismiss:function(){return o(!1)},disabled:!i},i&&h.createElement(a,{onSubmit:function(n){t(n)},close:function(){return o(!1)},models:Object.keys(e.templates)})))}function I(n){var e=n.field,t=n.onAddBlock,r=h.useState(null),i=r[0],o=r[1],a=h.useState(!1),l=a[0],s=a[1];return h.createElement(h.Fragment,null,h.createElement(P,{onClick:function(){return s(!0)},open:l,primary:!0,small:!0},h.createElement(d.AddIcon,null),"Add and link new block"),h.createElement(R,{open:l},h.createElement(m.Dismissible,{click:!0,escape:!0,onDismiss:function(){return s(!1)},disabled:!l},h.createElement(_,null,Object.entries(e.templates).map(function(n){var e=n[0],t=n[1];return h.createElement(G,{key:e,onClick:function(){o({id:e,template:t}),s(!1)}},t.label)})))),h.createElement(m.Dismissible,{escape:!0,onDismiss:function(){return o(null)},disabled:!i},i&&h.createElement(k,{plugin:{name:"New "+i.template.label,fields:i.template.fields,onSubmit:function(n,e){return e.api.contentful.save(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),void 0,i.id,S(n,"en-US")).then(function(n){return n.json()}).then(function(n){o(null),t(n)})}},close:function(){return o(null)}})))}function F(n){var e=n.entry,t=n.close,r=n.templates,i=y.useCMS(),o=e.sys.contentType.sys.id,a=E(E({},r[o]),{id:e.sys.id,initialValues:e.fields,onSubmit:function(n){return i.api.contentful.save(e.sys.id,e.sys.version,o,S(n,"en-US")).then(function(n){return n.json()}).then(function(){t()})}}),l=y.useForm(a)[1];return h.createElement(f.FormView,{activeForm:l})}var T,A,D=n.div.withConfig({displayName:"SelectElement",componentId:"sc-1a778um"})(i(["\n  display: block;\n  position: relative;\n  select {\n    display: block;\n    font-family: inherit;\n    max-width: 100%;\n    padding: var(--tina-padding-small);\n    border-radius: var(--tina-radius-small);\n    background: var(--tina-color-grey-0);\n    font-size: var(--tina-font-size-2);\n    line-height: 1.35;\n    position: relative;\n    background-color: var(--tina-color-grey-0);\n    transition: all 85ms ease-out;\n    border: 1px solid var(--tina-color-grey-2);\n    width: 100%;\n    margin: 0;\n    appearance: none;\n    outline: none;\n    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');\n    background-repeat: no-repeat;\n    background-position: right 0.7em top 50%;\n    background-size: 0.65em auto;\n  }\n"],["\n  display: block;\n  position: relative;\n  select {\n    display: block;\n    font-family: inherit;\n    max-width: 100%;\n    padding: var(--tina-padding-small);\n    border-radius: var(--tina-radius-small);\n    background: var(--tina-color-grey-0);\n    font-size: var(--tina-font-size-2);\n    line-height: 1.35;\n    position: relative;\n    background-color: var(--tina-color-grey-0);\n    transition: all 85ms ease-out;\n    border: 1px solid var(--tina-color-grey-2);\n    width: 100%;\n    margin: 0;\n    appearance: none;\n    outline: none;\n    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');\n    background-repeat: no-repeat;\n    background-position: right 0.7em top 50%;\n    background-size: 0.65em auto;\n  }\n"])),z=n.div.withConfig({displayName:"FieldDescription",componentId:"sc-1dj1fv8"})(i([""],[""])),B=n.div.withConfig({displayName:"GroupListHeader",componentId:"sc-182sg2w"})(i([""],[""])),O=n.div.withConfig({displayName:"GroupListMeta",componentId:"sc-9fhd9e"})(i([""],[""])),L=n.div.withConfig({displayName:"GroupLabel",componentId:"sc-1cx7w07"})(i([""],[""])),P=n(s.IconButton).withConfig({displayName:"AddBlockButton",componentId:"sc-4xt319"})(i(["\n  width: auto;\n"],["\n  width: auto;\n"])),j=function(){return h.createElement(U,null,"There are no items")},N=function(n){var t=n.label,e=n.tinaForm,r=n.field,i=n.index,o=n.template,a=n.block,l=h.useState(!1),s=l[0],c=l[1],u=h.useCallback(function(){e.mutators.remove(r.name,i)},[e,r,i]);return h.createElement(p.Draggable,{key:i,type:r.name,draggableId:r.name+"."+i,index:i},function(n,e){return h.createElement(h.Fragment,null,h.createElement(W,E({ref:n.innerRef,isDragging:e.isDragging},n.draggableProps,n.dragHandleProps),h.createElement(X,null),h.createElement(V,{onClick:function(){return c(!0)}},h.createElement(L,null,t||o.label)),h.createElement(Q,{onClick:u},h.createElement(d.TrashIcon,null))),s&&h.createElement(m.Dismissible,{escape:!0,onDismiss:function(){return c(!1)},disabled:!s},h.createElement(q,{close:function(){return c(!1)},label:t,block:a,templates:r.templates})))})},q=function(n){var e=n.block,t=n.label,r=n.close,i=n.templates,o=y.useCMS(),a=h.useState(null),l=a[0],s=a[1];return h.useEffect(function(){o.api.contentful.fetchFullEntry(e.sys.id).then(function(n){s(n)})},[]),h.createElement(y.Modal,null,h.createElement(y.ModalPopup,null,h.createElement(y.ModalHeader,{close:r},null!==t&&void 0!==t?t:null),h.createElement(y.ModalBody,null,l?h.createElement(F,{entry:l,close:r,templates:i}):h.createElement("p",null,"Loading"))))},H=function(n){var e=n.tinaForm,t=n.field,r=n.index,i=h.useCallback(function(){e.mutators.remove(t.name,r)},[e,t,r]);return h.createElement(p.Draggable,{key:r,type:t.name,draggableId:t.name+"."+r,index:r},function(n,e){return h.createElement(W,E({ref:n.innerRef,isDragging:e.isDragging},n.draggableProps,n.dragHandleProps),h.createElement(X,null),h.createElement(V,null,h.createElement(L,{error:!0},"Invalid Block")),h.createElement(Q,{onClick:i},h.createElement(d.TrashIcon,null)))})},U=n.div.withConfig({displayName:"EmptyList",componentId:"sc-1dux7ht"})(i(["\n  text-align: center;\n  border-radius: var(--tina-radius-small);\n  background-color: var(--tina-color-grey-2);\n  color: var(--tina-color-grey-4);\n  line-height: 1.35;\n  padding: 12px 0;\n  font-size: var(--tina-font-size-2);\n  font-weight: 500;\n"],["\n  text-align: center;\n  border-radius: var(--tina-radius-small);\n  background-color: var(--tina-color-grey-2);\n  color: var(--tina-color-grey-4);\n  line-height: 1.35;\n  padding: 12px 0;\n  font-size: var(--tina-font-size-2);\n  font-weight: 500;\n"])),R=n.div.withConfig({displayName:"BlockMenu",componentId:"sc-712jrw"})(i(["\n  min-width: 192px;\n  border-radius: var(--tina-radius-big);\n  border: 1px solid #efefef;\n  display: block;\n  position: absolute;\n  top: 0;\n  right: 0;\n  transform: translate3d(0, 0, 0) scale3d(0.5, 0.5, 1);\n  opacity: 0;\n  pointer-events: none;\n  transition: all 150ms ease-out;\n  transform-origin: 100% 0;\n  box-shadow: var(--tina-shadow-big);\n  background-color: white;\n  overflow: hidden;\n  z-index: var(--tina-z-index-1);\n  ",";\n"],["\n  min-width: 192px;\n  border-radius: var(--tina-radius-big);\n  border: 1px solid #efefef;\n  display: block;\n  position: absolute;\n  top: 0;\n  right: 0;\n  transform: translate3d(0, 0, 0) scale3d(0.5, 0.5, 1);\n  opacity: 0;\n  pointer-events: none;\n  transition: all 150ms ease-out;\n  transform-origin: 100% 0;\n  box-shadow: var(--tina-shadow-big);\n  background-color: white;\n  overflow: hidden;\n  z-index: var(--tina-z-index-1);\n  ",";\n"]),function(n){return n.open&&t.css(T=T||i(["\n      opacity: 1;\n      pointer-events: all;\n      transform: translate3d(0, 36px, 0) scale3d(1, 1, 1);\n    "],["\n      opacity: 1;\n      pointer-events: all;\n      transform: translate3d(0, 36px, 0) scale3d(1, 1, 1);\n    "]))}),_=n.div.withConfig({displayName:"BlockMenuList",componentId:"sc-jrvd2y"})(i(["\n  display: flex;\n  flex-direction: column;\n"],["\n  display: flex;\n  flex-direction: column;\n"])),G=n.button.withConfig({displayName:"BlockOption",componentId:"sc-1ozrga3"})(i(["\n  position: relative;\n  text-align: center;\n  font-size: var(--tina-font-size-0);\n  padding: var(--tina-padding-small);\n  font-weight: 500;\n  width: 100%;\n  background: none;\n  cursor: pointer;\n  outline: none;\n  border: 0;\n  transition: all 85ms ease-out;\n  &:hover {\n    color: var(--tina-color-primary);\n    background-color: var(--tina-color-grey-1);\n  }\n  &:not(:last-child) {\n    border-bottom: 1px solid #efefef;\n  }\n"],["\n  position: relative;\n  text-align: center;\n  font-size: var(--tina-font-size-0);\n  padding: var(--tina-padding-small);\n  font-weight: 500;\n  width: 100%;\n  background: none;\n  cursor: pointer;\n  outline: none;\n  border: 0;\n  transition: all 85ms ease-out;\n  &:hover {\n    color: var(--tina-color-primary);\n    background-color: var(--tina-color-grey-1);\n  }\n  &:not(:last-child) {\n    border-bottom: 1px solid #efefef;\n  }\n"])),V=n.div.withConfig({displayName:"ItemClickTarget",componentId:"sc-zmz22"})(i(["\n  flex: 1 1 0;\n  min-width: 0;\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px;\n"],["\n  flex: 1 1 0;\n  min-width: 0;\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px;\n"])),J=n.div.withConfig({displayName:"GroupListPanel",componentId:"sc-8v3hd1"})(i(["\n  max-height: initial;\n  position: relative;\n  height: auto;\n  margin-bottom: 24px;\n  border-radius: var(--tina-radius-small);\n  background-color: var(--tina-color-grey-2);\n"],["\n  max-height: initial;\n  position: relative;\n  height: auto;\n  margin-bottom: 24px;\n  border-radius: var(--tina-radius-small);\n  background-color: var(--tina-color-grey-2);\n"])),K=n.div.withConfig({displayName:"ItemList",componentId:"sc-10yv9ts"})(i([""],[""])),W=n.div.withConfig({displayName:"ItemHeader",componentId:"sc-hdog61"})(i(["\n  position: relative;\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n  background-color: white;\n  border: 1px solid var(--tina-color-grey-2);\n  margin: 0 0 -1px 0;\n  overflow: visible;\n  line-height: 1.35;\n  padding: 0;\n  font-size: var(--tina-font-size-2);\n  font-weight: 500;\n\n  "," {\n    color: var(--tina-color-grey-10);\n    align-self: center;\n    max-width: 100%;\n  }\n\n  svg {\n    fill: var(--tina-color-grey-3);\n    width: 20px;\n    height: auto;\n    transition: fill 85ms ease-out;\n  }\n\n  &:hover {\n    svg {\n      fill: var(--tina-color-grey-8);\n    }\n    "," {\n      color: var(--tina-color-primary);\n    }\n  }\n\n  &:first-child {\n    border-radius: 4px 4px 0 0;\n  }\n\n  &:nth-last-child(2) {\n    border-radius: 0 0 4px 4px;\n    &:first-child {\n      border-radius: var(--tina-radius-small);\n    }\n  }\n\n  ",";\n"],["\n  position: relative;\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n  background-color: white;\n  border: 1px solid var(--tina-color-grey-2);\n  margin: 0 0 -1px 0;\n  overflow: visible;\n  line-height: 1.35;\n  padding: 0;\n  font-size: var(--tina-font-size-2);\n  font-weight: 500;\n\n  "," {\n    color: var(--tina-color-grey-10);\n    align-self: center;\n    max-width: 100%;\n  }\n\n  svg {\n    fill: var(--tina-color-grey-3);\n    width: 20px;\n    height: auto;\n    transition: fill 85ms ease-out;\n  }\n\n  &:hover {\n    svg {\n      fill: var(--tina-color-grey-8);\n    }\n    "," {\n      color: var(--tina-color-primary);\n    }\n  }\n\n  &:first-child {\n    border-radius: 4px 4px 0 0;\n  }\n\n  &:nth-last-child(2) {\n    border-radius: 0 0 4px 4px;\n    &:first-child {\n      border-radius: var(--tina-radius-small);\n    }\n  }\n\n  ",";\n"]),L,L,function(n){return n.isDragging&&t.css(A=A||i(["\n      border-radius: var(--tina-radius-small);\n      box-shadow: 0px 2px 3px rgba(0, 0, 0, 0.12);\n\n      svg {\n        fill: var(--tina-color-grey-8);\n      }\n      "," {\n        color: var(--tina-color-primary);\n      }\n\n      "," {\n        svg:first-child {\n          opacity: 0;\n        }\n        svg:last-child {\n          opacity: 1;\n        }\n      }\n    "],["\n      border-radius: var(--tina-radius-small);\n      box-shadow: 0px 2px 3px rgba(0, 0, 0, 0.12);\n\n      svg {\n        fill: var(--tina-color-grey-8);\n      }\n      "," {\n        color: var(--tina-color-primary);\n      }\n\n      "," {\n        svg:first-child {\n          opacity: 0;\n        }\n        svg:last-child {\n          opacity: 1;\n        }\n      }\n    "]),L,X)}),Q=n.button.withConfig({displayName:"DeleteButton",componentId:"sc-1qsm8uz"})(i(["\n  text-align: center;\n  flex: 0 0 auto;\n  border: 0;\n  background: transparent;\n  cursor: pointer;\n  padding: 12px 8px;\n  margin: 0;\n  transition: all var(--tina-timing-short) ease-out;\n  &:hover {\n    background-color: var(--tina-color-grey-1);\n  }\n"],["\n  text-align: center;\n  flex: 0 0 auto;\n  border: 0;\n  background: transparent;\n  cursor: pointer;\n  padding: 12px 8px;\n  margin: 0;\n  transition: all var(--tina-timing-short) ease-out;\n  &:hover {\n    background-color: var(--tina-color-grey-1);\n  }\n"])),X=n(function(n){var e=r(n,[]);return h.createElement("div",E({},e),h.createElement(d.DragIcon,null),h.createElement(d.ReorderIcon,null))}).withConfig({displayName:"DragHandle",componentId:"sc-rqg99u"})(i(["\n  margin: 0;\n  flex: 0 0 auto;\n  width: 32px;\n  position: relative;\n  fill: inherit;\n  padding: 12px 0;\n  transition: all 85ms ease-out;\n  &:hover {\n    background-color: var(--tina-color-grey-1);\n    cursor: grab;\n  }\n  svg {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 20px;\n    height: 20px;\n    transform: translate3d(-50%, -50%, 0);\n    transition: all var(--tina-timing-short) ease-out;\n  }\n  svg:last-child {\n    opacity: 0;\n  }\n  *:hover > & {\n    svg:first-child {\n      opacity: 0;\n    }\n    svg:last-child {\n      opacity: 1;\n    }\n  }\n"],["\n  margin: 0;\n  flex: 0 0 auto;\n  width: 32px;\n  position: relative;\n  fill: inherit;\n  padding: 12px 0;\n  transition: all 85ms ease-out;\n  &:hover {\n    background-color: var(--tina-color-grey-1);\n    cursor: grab;\n  }\n  svg {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 20px;\n    height: 20px;\n    transform: translate3d(-50%, -50%, 0);\n    transition: all var(--tina-timing-short) ease-out;\n  }\n  svg:last-child {\n    opacity: 0;\n  }\n  *:hover > & {\n    svg:first-child {\n      opacity: 0;\n    }\n    svg:last-child {\n      opacity: 1;\n    }\n  }\n"])),Y={name:"linked-blocks",Component:function(n){function e(n){var e,t,r,i=E(E({},n),{fields:(e=n.fields,t="en-US",r={},Object.keys(e).forEach(function(n){r[n]=e[n][t]}),r)});o.mutators.push(a.name,i)}var i=n.tinaForm,o=n.form,a=n.field,t=n.input.value||[];return h.createElement(h.Fragment,null,h.createElement(B,null,h.createElement(O,null,h.createElement(L,null,a.label||a.name),a.description&&h.createElement(z,null,a.description)),h.createElement(I,{field:a,onAddBlock:e}),h.createElement(M,{field:a,onAddBlock:e})),h.createElement(J,null,h.createElement(K,null,h.createElement(p.Droppable,{droppableId:a.name,type:a.name},function(n){return h.createElement("div",{ref:n.innerRef,className:"edit-page--list-parent"},0===t.length&&h.createElement(j,null),t.map(function(n,e){var t=a.templates[a.getTemplateId(n)];if(!t)return h.createElement(H,{key:e,index:e,field:a,tinaForm:i});var r;return h.createElement(N,E({key:e,block:n,template:t,index:e,field:a,tinaForm:i},(r=n,t.itemProps?t.itemProps(r):{})))}),n.placeholder)}))))}};function Z(n){var e=y.useCMS().api.contentful;return n?e[n]:e}var $=b.createContext(null),nn=$.Provider;$.Consumer;function en(){var n=h.useContext($),e=h.useState(),t=e[0],r=e[1],i=v.getCachedAccessToken();return null!=n&&n.userAccessToken?r(n.userAccessToken):i&&r(null==n?void 0:n.userAccessToken),[t]}var tn=function(n){var e=n.name,t=n.primary,r=n.action,i=h.useState(!1),o=i[0],a=i[1],l=h.useCallback(function(){return w(void 0,void 0,void 0,function(){var e;return x(this,function(n){switch(n.label){case 0:a(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,r()];case 2:return n.sent(),a(!1),[3,4];case 3:throw e=n.sent(),a(!1),e;case 4:return[2]}})})},[r,a]);return b.createElement(s.Button,{primary:t,onClick:l,busy:o,disabled:o},o&&b.createElement(f.LoadingDots,null),!o&&e)};function rn(n){return b.createElement(s.TinaReset,null,b.createElement(y.Modal,null,b.createElement(y.ModalPopup,null,b.createElement(y.ModalHeader,{close:n.close},n.title),b.createElement(y.ModalBody,{padded:!0},b.createElement("p",null,n.message),n.error&&b.createElement(on,null,n.error)),b.createElement(y.ModalActions,null,n.actions.map(function(n){return b.createElement(tn,E({},n))})))))}var on=n.p.withConfig({displayName:"ErrorLabel",componentId:"sc-1cq3tut"})(i(["\n  color: var(--tina-color-error) !important;\n"],["\n  color: var(--tina-color-error) !important;\n"]));function an(n){var e=this,t=n.onClose,r=y.useCMS();return b.createElement(rn,{title:"Contentful Authorization",message:"To save edits, Tina requires Contenful authorization. On save, changes will be sent to Contentful using your account.",close:t,actions:[{name:"Cancel",action:t},{name:"Continue to Contentful",primary:!0,action:function(){return w(e,void 0,void 0,function(){var e,t;return x(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),r.api.contentful&&r.api.contentful.authenticate?[4,r.api.contentful.authenticate()]:[3,2];case 1:return(e=n.sent())&&r.events.dispatch({type:v.AUTH_SUCCESS,userAccessToken:e}),[3,3];case 2:throw new Error("No contentful API client found. Please register a client with Tina.");case 3:return[3,5];case 4:return t=n.sent(),r.events.dispatch({type:v.AUTH_FAILURE,error:t}),[3,5];case 5:return[2]}})})}}]})}function ln(n){var e=n.error,t=n.onClose,r=n.onRetry;return b.createElement(rn,{title:"Something went wrong...",message:e.message,close:t,actions:[{name:"Cancel",action:t},{name:"Log in again",primary:!0,action:r}]})}function sn(n,e,t){var r=y.useCMS();h.useEffect(function(){return r.events.subscribe(n,e)},t)}Object.keys(v).forEach(function(n){"default"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return v[n]}})}),e.BlocksFieldPlugin=Y,e.ContentfulLinkedSelectField=function(e){var n=h.useState([]),t=n[0],r=n[1];return b.createElement(D,null,b.createElement("select",{onChange:e.input.onChange,onMouseDown:function(){e.field.getOptions().then(function(n){r(n.items)})}},0!==t.length?t.map(function(n){return o(n,e.input.value)}):e.input.value?o(e.input.value,e.input.value):b.createElement(b.Fragment,null)))},e.TinaContentfulProvider=function(n){function e(){s("none"),p(void 0)}var t=n.enabled,r=n.onLogin,i=n.onLogout,o=n.children,a=(y.useCMS(),h.useState("none")),l=a[0],s=a[1],c=h.useState(),u=c[0],d=c[1],m=h.useState(),f=m[0],p=m[1],g={userAccessToken:u,onLogin:r,onLogout:i,enabled:t};return sn(y.TinaCMS.ENABLED.type,function(){s("authenticate")},[]),sn(y.TinaCMS.DISABLED.type,i,[]),sn(v.AUTH_FAILURE,function(n){p(n),s("error")},[]),sn(v.AUTH_SUCCESS,function(n){r&&r(),s("none"),d(n)},[]),b.createElement(nn,{value:g},"authenticate"===l&&b.createElement(an,{onClose:e}),"error"===l&&f&&b.createElement(ln,{onClose:e,onRetry:function(){s("authenticate"),p(void 0)},error:f}),o)},e.useCMSEvent=sn,e.useContentful=Z,e.useContentfulAuthRedirect=function(){"undefined"!=typeof window&&v.getAccessToken(window)},e.useContentfulEntries=function(n,r,e){var t=this,i=y.useCMS().enabled,o=Z(),a=h.useState([]),l=a[0],s=a[1],c=h.useState(!1),u=c[0],d=c[1],m=h.useState(),f=m[0],p=m[1];return h.useEffect(function(){w(t,void 0,void 0,function(){var e,t;return x(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),d(!0),[4,o.getEntries(r,{preview:i})];case 1:return(e=n.sent())&&(s(e),d(!1)),[3,3];case 2:return t=n.sent(),p(t),d(!1),[3,3];case 3:return[2]}})})},[n,r]),h.useMemo(function(){return[l,u,f]},[n,r])},e.useContentfulEntry=function(n,r,i){var e=this,o=y.useCMS().enabled,a=Z(),t=h.useState(),l=t[0],s=t[1],c=h.useState(!0),u=c[0],d=c[1],m=h.useState(),f=m[0],p=m[1];return h.useEffect(function(){w(e,void 0,void 0,function(){var e,t;return x(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,a.getEntry(r,{query:null==i?void 0:i.query,preview:o})];case 1:if(!(e=n.sent()))throw new Error("Entry "+r+" not found...");return s(e),d(!1),[3,3];case 2:return t=n.sent(),p(t),d(!1),[3,3];case 3:return[2]}})}).then(function(){return console.log("done")})},[n,r,null==i?void 0:i.preview,null==i?void 0:i.query]),h.useEffect(function(){return d(!1)},[]),[l,u,f]},e.useContentfulEntryForm=function(n,a,l){var s=this,c=y.useCMS().enabled,u=Z(),e=h.useState(),d=e[0],m=e[1],t=h.useState(),f=t[0],p=t[1],r=h.useState([]),i=r[0],g=r[1];return h.useEffect(function(){var n,t,e,r,i,o;w(s,void 0,void 0,function(){var e;return x(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),d&&d.sys.id===a?[3,2]:[4,u.getEntry(a,{query:null==l?void 0:l.query,preview:c})];case 1:(e=n.sent())&&m(e),n.label=2;case 2:return[3,4];case 3:throw n.sent();case 4:return[2]}})}),f||(l.contentType?p(f):!(l.contentTypeId||null!=d&&d.sys.contentType)||(n=l.contentTypeId||(null==d?void 0:d.sys.contentType.sys.id))&&(t=n,w(s,void 0,void 0,function(){var e;return x(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,u.getContentType(t,{preview:c})];case 1:return(e=n.sent())&&p(e),[3,3];case 2:throw n.sent();case 3:return[2]}})}))),o=[],f&&f.fields&&(o=v.createFieldConfigFromContentType(f)),0===(null===(e=l.fields)||void 0===e?void 0:e.length)?o=l.fields:l.fields&&(r=o,i=l.fields,r.map(function(n){return E(E({},i.find(function(n){return n.id==n.id&&n})),n)})),g(o)},[n,a,l.contentType,l.contentTypeId,f]),y.useForm({id:a,label:l.label||a,initialValues:d,fields:i||[],actions:l.actions||[],onSubmit:function(n){console.log(n)}})},e.useContentfulManagement=function(n){var e=Z(n).sdks.managementClient;return en()[0],e},e.useContentfulUserAuthToken=en,Object.defineProperty(e,"__esModule",{value:!0})});
